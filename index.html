<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Cadastro Local Avan√ßado</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    /* =======================
       ESTILO GLOBAL MODERNO
    ======================== */
    * {
      box-sizing: border-box;
      transition: all 0.2s ease;
    }

    body {
      font-family: "Inter", Arial, sans-serif;
      margin: 0;
      background: linear-gradient(135deg, #f8fafc, #eef2f3);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    h2 {
      text-align: center;
      color: #1f2937;
      margin-bottom: 20px;
    }

    .container {
      width: 100%;
      max-width: 900px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.08);
      padding: 25px;
      margin-bottom: 40px;
    }

    /* =======================
       LOGIN / REGISTRO
    ======================== */
    .login-section {
      text-align: center;
      margin-bottom: 30px;
    }

    .login-section input {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
    }

    .login-section button {
      width: 100%;
      padding: 12px;
      background: #2563eb;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
    }

    .login-section button:hover {
      background: #1e40af;
    }

    .toggle {
      color: #2563eb;
      font-size: 14px;
      cursor: pointer;
      text-decoration: underline;
    }

    /* =======================
       √ÅREA DE CADASTRO
    ======================== */
    .input-area input {
      padding: 10px;
      margin: 5px;
      width: calc(33% - 10px);
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .input-area button {
      padding: 10px 16px;
      margin: 5px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      background: #22c55e;
      color: #fff;
      font-weight: 600;
    }

    .input-area button:hover {
      background: #16a34a;
    }

    .export-buttons {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .export-buttons button {
      padding: 10px 14px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      color: #fff;
    }

    .btn-txt { background: #6366f1; }
    .btn-txt:hover { background: #4f46e5; }
    .btn-excel { background: #10b981; }
    .btn-excel:hover { background: #059669; }
    .btn-pdf { background: #ef4444; }
    .btn-pdf:hover { background: #b91c1c; }

    /* =======================
       CAMPO DE BUSCA
    ======================== */
    .search-bar {
      margin: 15px 0;
      text-align: center;
    }

    .search-bar input {
      width: 90%;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #bbb;
      font-size: 16px;
    }

    /* =======================
       TABELA ESTILIZADA
    ======================== */
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      overflow: hidden;
      border-radius: 10px;
    }

    th, td {
      text-align: left;
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
    }

    th {
      background: #2563eb;
      color: #fff;
      font-weight: 600;
    }

    tr:hover {
      background: #f1f5f9;
    }

    td input {
      width: 100%;
      border: none;
      background: transparent;
      padding: 4px;
      font-size: 14px;
    }

    /* =======================
       BOT√ïES DENTRO DA TABELA
    ======================== */
    td button {
      border: none;
      padding: 6px 10px;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      font-size: 13px;
      margin-right: 4px;
    }

    .btn-edit {
      background: #3b82f6;
    }

    .btn-edit:hover {
      background: #1d4ed8;
    }

    .btn-delete {
      background: #ef4444;
    }

    .btn-delete:hover {
      background: #b91c1c;
    }

    /* =======================
       RESPONSIVIDADE
    ======================== */
    @media (max-width: 768px) {
      .input-area input {
        width: 100%;
        margin-bottom: 10px;
      }

      table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
      }

      th, td {
        padding: 10px 8px;
      }

      .login-section button {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container" id="loginContainer">
    <h2 id="loginTitle">Entrar</h2>
    <div class="login-section">
      <input id="loginEmail" type="email" placeholder="Email">
      <input id="loginSenha" type="password" placeholder="Senha">
      <button onclick="entrar()">Entrar</button>
      <p class="toggle" onclick="alternar()">N√£o tem conta? Registrar</p>
    </div>
  </div>

  <div class="container" id="cadastroContainer" style="display:none;">
    <h2>Cadastro Local Avan√ßado</h2>

    <div class="input-area">
      <input id="nome" placeholder="Nome">
      <input id="sobrenome" placeholder="Sobrenome">
      <input id="email" placeholder="Email">
      <button onclick="salvar()">üíæ Salvar</button>
    </div>

    <div class="search-bar">
      <input id="busca" type="text" placeholder="üîç Buscar por nome, sobrenome ou email..." oninput="buscar()">
    </div>

    <table id="tabela">
      <thead>
        <tr>
          <th>UUID</th>
          <th>Nome</th>
          <th>Sobrenome</th>
          <th>Email</th>
          <th>A√ß√µes</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div class="export-buttons">
      <button class="btn-txt" onclick="exportarTXT()">üíæ TXT</button>
      <button class="btn-excel" onclick="exportarExcel()">üìä Excel</button>
      <button class="btn-pdf" onclick="exportarPDF()">üìÑ PDF</button>
    </div>
  </div>

  <script>
    function alternar() {
      const title = document.getElementById("loginTitle");
      const btn = document.querySelector(".login-section button");
      const toggle = document.querySelector(".toggle");

      if (title.textContent === "Entrar") {
        title.textContent = "Registrar";
        btn.textContent = "Registrar";
        toggle.textContent = "J√° tem conta? Entrar";
      } else {
        title.textContent = "Entrar";
        btn.textContent = "Entrar";
        toggle.textContent = "N√£o tem conta? Registrar";
      }
    }

    function entrar() {
      document.getElementById("loginContainer").style.display = "none";
      document.getElementById("cadastroContainer").style.display = "block";
    }

    function gerarUUID() {
      return 'xxxx-4xxx-yxxx-xxxx'.replace(/[xy]/g, c => {
        const r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);
        return v.toString(16);
      });
    }

    function salvar() {
      const nome = nomeEl.value.trim();
      const sobrenome = sobrenomeEl.value.trim();
      const email = emailEl.value.trim();

      if (!nome || !sobrenome || !email) return alert("Preencha todos os campos!");
      const uuid = gerarUUID();

      const lista = JSON.parse(localStorage.getItem("usuarios")) || [];
      lista.push({ uuid, nome, sobrenome, email });
      localStorage.setItem("usuarios", JSON.stringify(lista));
      mostrar();
      nomeEl.value = sobrenomeEl.value = emailEl.value = "";
    }

    const nomeEl = document.getElementById("nome");
    const sobrenomeEl = document.getElementById("sobrenome");
    const emailEl = document.getElementById("email");

    function mostrar(filtro = "") {
      const lista = JSON.parse(localStorage.getItem("usuarios")) || [];
      const tbody = document.querySelector("#tabela tbody");
      tbody.innerHTML = "";

      lista
        .filter(u =>
          u.nome.toLowerCase().includes(filtro) ||
          u.sobrenome.toLowerCase().includes(filtro) ||
          u.email.toLowerCase().includes(filtro)
        )
        .forEach(item => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td>${item.uuid}</td>
            <td><input value="${item.nome}" onchange="atualizar('${item.uuid}','nome',this.value)"></td>
            <td><input value="${item.sobrenome}" onchange="atualizar('${item.uuid}','sobrenome',this.value)"></td>
            <td><input value="${item.email}" onchange="atualizar('${item.uuid}','email',this.value)"></td>
            <td>
              <button class="btn-edit" onclick="alert('Editado!')">Editar</button>
              <button class="btn-delete" onclick="apagar('${item.uuid}')">Apagar</button>
            </td>`;
          tbody.appendChild(tr);
        });
    }

    function atualizar(uuid, campo, valor) {
      const lista = JSON.parse(localStorage.getItem("usuarios")) || [];
      const item = lista.find(i => i.uuid === uuid);
      if (item) item[campo] = valor;
      localStorage.setItem("usuarios", JSON.stringify(lista));
    }

    function apagar(uuid) {
      let lista = JSON.parse(localStorage.getItem("usuarios")) || [];
      lista = lista.filter(i => i.uuid !== uuid);
      localStorage.setItem("usuarios", JSON.stringify(lista));
      mostrar();
    }

    function buscar() {
      const termo = document.getElementById("busca").value.toLowerCase();
      mostrar(termo);
    }

    // ===== EXPORTA√á√ïES =====
    function exportarTXT() {
      const lista = JSON.parse(localStorage.getItem("usuarios")) || [];
      let conteudo = "UUID\tNome\tSobrenome\tEmail\n";
      lista.forEach(u => conteudo += `${u.uuid}\t${u.nome}\t${u.sobrenome}\t${u.email}\n`);
      const blob = new Blob([conteudo], { type: "text/plain" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "usuarios.txt";
      a.click();
    }

    function exportarExcel() {
      const lista = JSON.parse(localStorage.getItem("usuarios")) || [];
      let conteudo = "UUID,Nome,Sobrenome,Email\n";
      lista.forEach(u => conteudo += `"${u.uuid}","${u.nome}","${u.sobrenome}","${u.email}"\n`);
      const blob = new Blob([conteudo], { type: "text/csv" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "usuarios.csv";
      a.click();
    }

    function exportarPDF() {
      const lista = JSON.parse(localStorage.getItem("usuarios")) || [];
      let conteudo = "Cadastro de Usu√°rios\n\n";
      lista.forEach(u => conteudo += `${u.nome} ${u.sobrenome} - ${u.email}\n`);
      const blob = new Blob([conteudo], { type: "application/pdf" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "usuarios.pdf";
      a.click();
    }

    mostrar();
  </script>
</body>
</html>